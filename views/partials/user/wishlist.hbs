<link rel="stylesheet" href="/stylesheet/shop.css">
<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Poppins:400,700&display=swap" rel="stylesheet">
<!-- fontawesome -->
<link rel="stylesheet" href="/stylesheet/assets/css/all.min.css">
<!-- bootstrap -->
<link rel="stylesheet" href="/stylesheet/assets/bootstrap/css/bootstrap.min.css">
<!-- owl carousel -->
<link rel="stylesheet" href="/stylesheet/assets/css/owl.carousel.css">
<!-- magnific popup -->
<link rel="stylesheet" href="/stylesheet/assets/css/magnific-popup.css">
<!-- animate css -->
<link rel="stylesheet" href="/stylesheet/assets/css/animate.css">
<!-- mean menu css -->
<link rel="stylesheet" href="/stylesheet/assets/css/meanmenu.min.css">
<!-- main style -->
<link rel="stylesheet" href="/stylesheet/assets/css/main.css">
<!-- responsive -->
<link rel="stylesheet" href="/stylesheet/assets/css/responsive.css">
{{!-- sweet alert --}}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.1.5/dist/sweetalert2.min.css">
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">


<!--PreLoader-->
<div class="loader">
    <div class="loader-inner">
        <div class="circle"></div>
    </div>
</div>
<!--PreLoader Ends-->

<!-- header -->
<div class="top-header-area" id="sticker">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 col-sm-12 text-center">
                <div class="main-menu-wrap">
                    <!-- logo -->
                    <div class="site-logo">
                        <a href="/home">
                            <h3 style="color: #F28123;margin-top: 9px;">Evolve.</h3>
                            {{!-- <img src="stylesheet/assets/img/logo.png" alt=""> --}}
                        </a>
                    </div>
                    <!-- logo -->

                    <!-- menu start -->
                    <nav class="main-menu">
                        <ul>
                            <li><a href="/home">Home</a></li>
                            <li><a href="/shop">Shop</a></li>
                            {{#if verified}}<li><a href="/profile">Profile</a></li>
                            {{else}}<li><a href="/login">Login</a></li>{{/if}}
                            <li><a href="/contact">Contact</a></li>
                            <li class="current-list-item"><a href="/wishlist">Wishlist</a></li>
                            <li>
                                <div class="header-icons">
                                    <a class="shopping-cart" href="/cart"><i class="fas fa-shopping-cart"></i></a>
                                    <a>
                                        <form action="/shop" method="get" style="margin-right:2%;">
                                            <div style="" class="input-group">
                                                <input id="searchBar" name="search" style="width: 130px;height: 40px;"
                                                    class="form-control" aria-describedby="button-addon2"
                                                    placeholder="Search" {{#if search}} value="{{search}}" {{/if}}>
                                                <button
                                                    style="border-color: rgb(223, 216, 216); border-left: white; background-color: white;"
                                                    class="btn " type="submit" id="button-addon2"><i id="searchbtn"
                                                        style="font-size: 20px;" class='bx bx-search'></i></button>
                                            </div>
                                        </form>
                                    </a>
                                </div>
                            </li>
                        </ul>
                    </nav>
                    <div class="mobile-menu"></div>
                    <!-- menu end -->
                </div>
            </div>
        </div>
    </div>
</div>
<!-- end header -->

<!-- search area -->
<div class="search-area">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <span class="close-btn"><i class="fas fa-window-close"></i></span>
                <div class="search-bar">
                    <div class="search-bar-tablecell">
                        <h3>Search For:</h3>
                        <form action="shop">
                            <input name="search" type="search" placeholder="Keywords">
                            <button type="submit">Search <i class="fas fa-search"></i></button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- end search area -->

{{!-- <section class="banner-section border-top border-bottom">
    <div class="text-center">
        <h2 style="padding-top:100px;">Shop</h2>
    </div>
</section> --}}
<!-- breadcrumb-section -->
<div class="breadcrumb-section breadcrumb-bg">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 offset-lg-2 text-center">
                <div class="breadcrumb-text">

                    <h1 style="font-weight: 700;">My Wishlist</h1>
                    {{#if notLogin}}<span class="text-white">Please Login</span>{{else}}{{#eq wishlistItemsCount
                    0}}<span style="color: #F28123;">No items found</span>{{else}}<p><span>{{wishlistItemsCount}}</span>
                        Items</p>{{/eq}}{{/if}}
                </div>
            </div>
        </div>
    </div>
</div>
<!-- end breadcrumb section -->


<section>
    <div class="container" id="home-content">
        <div>

        </div>
        <div class="row cards my-4">
            {{#each products}}
            <div style="" class="col-lg-3 col-md-4 col-sm-12 text-center">
                <div class="single-product-item">
                    {{#if this.productId.badge}}<div class="badge">{{productId.badge}}</div>{{/if}}
                    {{#if this.productId.image}}
                    <div class="product-image">
                        <a href="/product_details/{{this.productId._id}}"><img
                                src="/productimages/{{this.productId.image.[0]}}" alt=""></a>
                    </div>
                    {{/if}}
                    <h3>{{this.productId.name}}</h3>
                    <p class="product-price"><span>category : {{this.productId.category}}</span><i
                            class="bi bi-currency-rupee"></i> {{this.productId.offerprice}} </p>
                    <div class="d-flex px-4 justify-content-center" style="margin-left: auto;margin-right: auto;">
                        <a class="cart-btn add-to-cart-btn" data-product-id="{{this.productId._id}}"><i
                                class="fas fa-shopping-cart"></i> Add to Cart</a>
                        <a data-product-id="{{this.productId._id}}" class="pt-2 removeItem"
                            style="width: 40px;margin-left: 15px;padding: 3px;border-radius: 50%;"><i
                                style="font-size: 20px;color:rgb(255, 123, 0)" class="bi bi-heart-fill"></i></a>
                    </div>
                </div>
            </div>
            {{/each}}
            </a>
        </div>
        {{#eq wishlistItemsCount 0}}
        <div style="height: 500px;">
            <div class="" style="margin: auto;width: 200px;">
                <img class="img-fluid" src="/Images/page.png">

            </div>
            <div class="" style="margin: auto;width: 293px;">
                <h3 class="" style="font-weight: 500;opacity: 80%;">No items added yet!</h3>
                <div class="d-flex justify-content-center">
                    <a href="/shop" class="cart-btn">Add Items</a>
                </div>
            </div>

        </div>
        {{/eq}}
        {{#if notLogin}}
        <div style="height: 500px;">
            <div class="" style="margin: auto;width: 200px;">
                <img class="img-fluid" src="/Images/page.png">

            </div>
            <div class="" style="margin: auto;width: 293px;">
                <h3 class="text-center" style="font-weight: 500;opacity: 80%;">Please Login for add Items to wishlist!
                </h3>
                <div class="d-flex justify-content-center">
                    <a href="/login" class="cart-btn">Login Now</a>
                </div>
            </div>

        </div>
        {{/if}}
    </div>
</section>


<!-- footer -->
<div class="footer-area">
    <div class="container">
        <div class="row">
            <div class="col-lg-3 col-md-6">
                <div class="footer-box about-widget">
                    <h2 class="widget-title">About us</h2>
                    <p>Evolve: Elevate your space with curated home decor and furniture. Explore a blend of style and
                        innovation for a sophisticated living experience.</p>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="footer-box get-in-touch">
                    <h2 class="widget-title">Get in Touch</h2>
                    <ul>
                        <li> GK Building , Bangalore 432</li>
                        <li>support@evolve.com</li>
                        <li>+91 667 8822 0909</li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="footer-box pages">
                    <h2 class="widget-title">Explore</h2>
                    <ul>
                        <li><a href="/home">Home</a></li>
                        <li><a href="/about">About</a></li>
                        <li><a href="/shop">Shop</a></li>
                        <li><a href="/contact">Contact</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="footer-box subscribe">
                    <h2 class="widget-title">Subscribe</h2>
                    <p>Subscribe to our mailing list to get the latest updates.</p>
                    <form action="">
                        <input type="email" placeholder="Email">
                        <button type="submit"><i class="fas fa-paper-plane"></i></button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- end footer -->

<!-- copyright -->
<div class="copyright">
    <div class="container">
        <div class="row">
            <div class="col-lg-6 col-md-12">
                <p>Copyrights &copy; 2023 - <a href="/home">Evolve</a>, All Rights
                    Reserved.</p>
            </div>
            <div class="col-lg-6 text-right col-md-12">
                <div class="social-icons">
                    <ul>
                        <li><a href="#" target="_blank"><i class="fab fa-facebook-f"></i></a></li>
                        <li><a href="#" target="_blank"><i class="fab fa-twitter"></i></a></li>
                        <li><a href="#" target="_blank"><i class="fab fa-instagram"></i></a></li>
                        <li><a href="#" target="_blank"><i class="fab fa-linkedin"></i></a></li>
                        <li><a href="#" target="_blank"><i class="fab fa-dribbble"></i></a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- end copyright -->

<!-- jquery -->
<script src="/stylesheet/assets/js/jquery-1.11.3.min.js"></script>
<!-- bootstrap -->
<script src="/stylesheet/assets/bootstrap/js/bootstrap.min.js"></script>
<!-- count down -->
<script src="/stylesheet/assets/js/jquery.countdown.js"></script>
<!-- isotope -->
<script src="/stylesheet/assets/js/jquery.isotope-3.0.6.min.js"></script>
<!-- waypoints -->
<script src="/stylesheet/assets/js/waypoints.js"></script>
<!-- owl carousel -->
<script src="/stylesheet/assets/js/owl.carousel.min.js"></script>
<!-- magnific popup -->
<script src="/stylesheet/assets/js/jquery.magnific-popup.min.js"></script>
<!-- mean menu -->
<script src="/stylesheet/assets/js/jquery.meanmenu.min.js"></script>
<!-- sticker js -->
<script src="/stylesheet/assets/js/sticker.js"></script>
<!-- main js -->
<script src="/stylesheet/assets/js/main.js"></script>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
<script>
    //add to cart
    $(document).ready(function () {
        $(".add-to-cart-btn").click(function () {
            const productId = $(this).data("product-id");
            $.ajax({
                type: "POST",
                url: "/add-to-cart", // Your server route for adding items to the cart
                data: { productId: productId },
                success: function (data) {
                    //$('#response-content').text(data);
                    if (data.status == 'warning') {
                        const dialogBTn = document.getElementById('dialogBtn');
                        dialogBTn.click();
                    }
                    else if (data == "Item already added") {
                        Swal.fire({
                            icon: 'error',
                            title: 'error occured',
                            showConfirmButton: false,
                            timer: 2000
                        })
                    } else {
                        Swal.fire({
                            icon: 'success',
                            title: 'Item Added to Cart',
                            showConfirmButton: false,
                            timer: 2000
                        })
                    }
                },
                error: function (error) {
                    console.error(error);
                }
            });
        });
    });

    //Remove wihslist Item
    $(document).ready(function () {
        $(".removeItem").click(function () {
            const productId = $(this).data("product-id");
            const response = Swal.fire({
                title: "Are you Sure ",
                text: "To Remove this Item from wishlist",
                icon: "question",
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#990f0f',
                confirmButtonText: 'Yes',
                cancelButtonText: 'No !'
            }).then((result) => {
                if (result.isConfirmed) {
                    $.ajax({
                        type: "POST",
                        url: "/remove_wishlist", // Your server route for adding items to the cart
                        data: { productId: productId },
                        success: function (data) {
                            //$('#response-content').text(data);
                            if (data.status == "success") {
                                Toastify({
                                    text: 'Item removed from wishlist',
                                    duration: 5000, // Display the toast for 5 seconds
                                    gravity: "top", // Position the toast at the top
                                    position: "right", // Position the toast on the right side
                                    backgroundColor: "green", // Customize the toast background color
                                }).showToast();
                                setTimeout(() => {
                                    location.reload()
                                }, 2000)
                            } else {
                                Toastify({
                                    text: 'An error occured',
                                    duration: 5000, // Display the toast for 5 seconds
                                    gravity: "top", // Position the toast at the top
                                    position: "right", // Position the toast on the right side
                                    backgroundColor: "red", // Customize the toast background color
                                }).showToast();
                            }
                        },
                        error: function (error) {
                            Toastify({
                                text: 'An error occured',
                                duration: 5000, // Display the toast for 5 seconds
                                gravity: "top", // Position the toast at the top
                                position: "right", // Position the toast on the right side
                                backgroundColor: "red", // Customize the toast background color
                            }).showToast();
                            console.error(error);
                        }
                    });
                }
            })

        });
    });

</script>